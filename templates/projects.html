<!doctype html>
<html class="no-js" lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>My IT Team </title>
    <link rel="icon" href="../static/favicon/favicon.ico" type="image/x-icon"> <!-- Favicon-->

    <!-- project css file  -->
    <link rel="stylesheet" href="../static/css/my-task.style.min.css">
</head>
<body>

<div id="mytask-layout" class="theme-indigo">

    <!-- sidebar -->


    <!-- main body area -->
    <div class="main px-lg-4 px-md-4">

        <!-- Body: Header -->
        <!-- Body: Header -->
        <div class="header">
            <nav class="navbar py-4">
                <div class="container-xxl">

                    <!-- header rightbar icon -->
                    <div class="h-right d-flex align-items-center mr-5 mr-lg-0 order-1">
                        <div class="d-flex ">

                            <div class="form-check form-switch theme-switch mt-1 ">
                                <input type="checkbox" class="checkbox " id="theme-switch">
                                <label for="theme-switch" class="checkbox-label">
                                    <i class="fas fa-sun"></i>
                                    <i class="fas fa-moon"></i>

                                    <span class="ball"></span>
                                </label>
                            </div>


                            <div class="avatar-list avatar-list-stacked px-3">
                                {% for member in current_user.teams %}
                                <img class="avatar rounded-circle" src="../static/images/xs/{{ member.avatar_location }}" alt="">
                                {% endfor %}

                                <span class="avatar rounded-circle text-center pointer" data-bs-toggle="modal"
                                      data-bs-target="#addUser"><i class="icofont-ui-add"></i></span>
                            </div>
                        </div>
                        <div class="dropdown notifications zindex-popover">
                            <a class="nav-link dropdown-toggle pulse" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="icofont-alarm fs-5"></i>
                                
                            </a>
                            <div id="NotificationsDiv"
                                 class="dropdown-menu rounded-lg shadow border-0 dropdown-animation dropdown-menu-sm-end p-0 m-0">
                                <div class="card border-0 w380">
                                    <div class="card-header border-0 p-3">
                                        <h5 class="mb-0 font-weight-light d-flex justify-content-between">
                                            <span>Notifications</span>
                                            <span class="badge text-white">11</span>
                                        </h5>
                                    </div>
                                    <div class="tab-content card-body">
                                        <div class="tab-pane fade show active">
                                            <ul class="list-unstyled list mb-0">



                                                {% for notification in current_user.notifications_received[::-1] %}
                                                <li class="py-2">
                                                    <a href="javascript:void(0);" class="d-flex">
                                                        <img class="avatar rounded-circle sm"
                                                             src="../static/images/lg/{{ notification.sender.avatar_location }}" alt="">
                                                        <div class="flex-fill ms-2">
                                                            <p class="d-flex justify-content-between mb-0 "><span
                                                                    class="font-weight-bold">{{ notification.sender.first_name }} {{ notification.sender.last_name }}</span> <small
                                                                    class="">{{ format_date(notification.time_stamp) }}</small></p>
                                                            <span class="">{{ notification.notificationtext }}</span>
                                                        </div>
                                                    </a>
                                                </li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="dropdown user-profile ml-2 ml-sm-3 d-flex align-items-center zindex-popover">
                            <div class="u-info me-2 text-center">
                                <small>Welcome back</small>
                                <p class="mb-0 text-end line-height-sm "><span
                                        class="font-weight-bold">{{ current_user.first_name }} {{ current_user.last_name }}</span>
                                </p>

                            </div>
                            <a class="nav-link dropdown-toggle pulse p-0" href="#" role="button"
                               data-bs-toggle="dropdown" data-bs-display="static">
                                <img class="avatar lg rounded-circle img-thumbnail"
                                     src="../static/images/lg/{{ current_user.avatar_location }}" alt="profile">
                            </a>
                            <div class="dropdown-menu rounded-lg shadow border-0 dropdown-animation dropdown-menu-end p-0 m-0">
                                <div class="card border-0 w280">
                                    <div class="card-body pb-0">
                                        <div class="d-flex py-1">
                                            <img class="avatar rounded-circle sm" src="../static/images/lg/{{ current_user.avatar_location }}"
                                                 alt="profile">
                                            <div class="flex-fill ms-3">
                                                <p class="mb-0"><span
                                                        class="font-weight-bold">{{ current_user.first_name }} {{ current_user.last_name }}</span>
                                                </p>
                                                <small class="">{{ current_user.email }}</small>
                                            </div>
                                        </div>

                                        <div>
                                            <hr class="dropdown-divider border-dark">
                                        </div>
                                    </div>
                                    <div class="list-group m-2 ">


                                        <a href="{{ url_for('logout') }}"
                                           class="list-group-item list-group-item-action border-0 "><i
                                                class="icofont-logout fs-6 me-3"></i>Signout</a>
                                        <div>
                                            <hr class="dropdown-divider border-dark">
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- menu toggler -->
                    <button class="navbar-toggler p-0 border-0 menu-toggle order-3" type="button"
                            data-bs-toggle="collapse" data-bs-target="#mainHeader">
                        <span class="fa fa-bars"></span>
                    </button>

                    <!-- main menu Search-->
                    <div class="order-0 col-lg-4 col-md-4 col-sm-12 col-12 mb-3 mb-md-0 ">
                        <div class="input-group flex-nowrap input-group-lg">
                            <a href="index-2.html" class="mb-0 brand-icon">
                                <span class="logo-icon border-1 border-dark-subtle border-opacity-50 icofont-border">
                                    <svg width="35" height="35" fill="#484d7e"
                                         class="bi bi-clipboard-check text-primary" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd"
                                              d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
                                        <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                                        <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                                    </svg>
                                </span>
                                <span class="logo-text text-primary p-1">Task Manager</span>
                            </a>
                        </div>
                    </div>

                </div>
            </nav>
        </div>

        <!-- Body: Body -->
        <div class="body d-flex py-lg-3 py-md-2">
            <div class="container-xxl">
                <div class="row align-items-center">
                    <div class="border-0 mb-4">
                        <div class="card-header p-0 no-bg bg-transparent d-flex align-items-center px-0 justify-content-between border-bottom flex-wrap">
                            <h3 class="fw-bold py-3 mb-0">My Tasks </h3>

                        </div>
                    </div>
                </div> <!-- Row end  -->
                <div class="row ">

                    <!-- Tasks Tab -->
                    <div class="col-xl-4 col-lg-12 col-md-12">
                        <div class="card mb-3">
                            <div class="card-header py-3">
                                <h6 class="mb-0 fw-bold ">Tasks</h6>
                            </div>
                            {% for task in current_user.tasks[::-1] if task.task_status == 'new' %}


                                <div class="card-body">
                                    <div class="planned_task client_task">
                                        <div class="dd" data-plugin="nestable">
                                            <ol class="dd-list list-unstyled">
                                                <li class="dd-item mb-3">
                                                    <div class="dd-handle">
                                                        <div class="task-info d-flex align-items-center justify-content-between">
                                                            <h6 class="light-info-bg py-1 px-2 rounded-1 d-inline-block fw-bold small-14 mb-0">{{ task.task_type }}</h6>
                                                            <div class="task-priority d-flex flex-column align-items-center justify-content-center">
                                                                <div class="avatar-list avatar-list-stacked m-0">

                                                                    <img class="avatar rounded-circle small-avt sm"
                                                                         src="../static/images/lg/{{ task.author.avatar_location }}" alt="">
                                                                </div>
                                                                <span class="badge bg-lightblue text-end mt-1">New</span>
                                                            </div>
                                                        </div>
                                                        <p class="py-2 mb-0">{{ task.task_description }}.</p>
                                                        <div class="tikit-info row g-3 align-items-center">
                                                            <div class="col-sm">
                                                            </div>
                                                            <div class="col-sm text-end">
                                                            <div class="small text-truncate light-danger-bg py-1 px-2 rounded-1 d-inline-block fw-bold small"> {{ task.author.first_name }} {{ task.author.last_name }} </div>
                                                        </div>
                                                            <div class="btn-group" role="group"
                                                                 aria-label="Basic outlined example">
                                                                <button type="button" class="btn btn-outline-secondary"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#edittickit{{ task.id }}">
                                                                    <i class="icofont-edit text-success"></i></button>

                                                                 {% if task.author.id == current_user.id %}
                                                                <form action="{{ url_for('my_boards', task_id=task.id) }}" method="post">
                                                                <button name="delete_task" type="submit"
                                                                        class="btn btn-outline-secondary deleterow"><i
                                                                        class="icofont-ui-delete text-danger"></i>
                                                                </button>
                                                                    </form>
                                                                {% endif %}
                                                            </div>




                                                        </div>
                                                    </div>

                                                </li>


                                            </ol>
                                        </div>
                                    </div>
                                </div>


                            <!-- Add User To Task-->
        <div class="modal fade" id="addUserTask{{ task.id }}" tabindex="-1" aria-labelledby="addUserLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title  fw-bold" id="addUserLabel">Add User To Task</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">






                    <div class="members_list">
                            <h6 class="fw-bold ">Team Members </h6>
                            <ul class="list-unstyled list-group list-group-custom list-group-flush mb-0">
                                <li class="list-group-item py-3 text-center text-md-start">
                                    <div class="d-flex align-items-center flex-column flex-sm-column flex-md-column flex-lg-row">
                                        <div class="no-thumbnail mb-2 mb-md-0">
                                            <img class="avatar lg rounded-circle" src="../static/images/lg/{{ current_user.avatar_location }}"
                                                 alt="">
                                        </div>
                                        <div class="flex-fill ms-3 text-truncate">
                                            <h6 class="mb-0  fw-bold">{{ current_user.first_name }} {{ current_user.last_name }}</h6>
                                            <span class="text-muted">{{ current_user.email }}</span>
                                        </div>

                                    </div>
                                </li>

                                {% for team_member in current_user.teams %}

                                <li class="list-group-item py-3 text-center text-md-start">
                                    <div class="d-flex align-items-center flex-column flex-sm-column flex-md-column flex-lg-row">
                                        <div class="no-thumbnail mb-2 mb-md-0">
                                            <img class="avatar lg rounded-circle" src="../static/images/lg/{{ team_member.avatar_location }}"
                                                 alt="">
                                        </div>
                                        <div class="flex-fill ms-3 text-truncate">
                                            <h6 class="mb-0  fw-bold">{{ team_member.first_name }} {{ team_member.last_name }}</h6>
                                            <span class="text-muted">{{ team_member.email }}</span>
                                        </div>
                                        {% if task not in team_member.tasks %}

                                            <form action="{{ url_for('my_boards', user=team_member.id, task_id=task.id) }}" method="post">
                                                    <div class="btn-group">
                                                        <button href="{{ url_for('my_boards') }}" name="add_user_to_task" type="submit" class="btn btn-primary"
                                                                 aria-expanded="false">
                                                            Add User
                                                        </button>

                                                    </div>
                                                 </form>


                                        {% else %}



                                            {% if task.author.id == current_user.id %}
                                             <div class="members-action">

                                            <div class="btn-group">
                                                <button type="button" class="btn bg-transparent dropdown-toggle"
                                                        data-bs-toggle="dropdown" aria-expanded="false">
                                                    <i class="icofont-ui-settings  fs-6"></i>
                                                </button>
                                                <ul class="dropdown-menu dropdown-menu-end">
                                                    <li>
                                                        <form action="{{ url_for('my_boards', user_id=team_member.id, task_id=task.id) }}" method="post">
                                                            <button type="submit" name="delete_user_from_task" class="dropdown-item" href="#"><i
                                                            class="icofont-delete-alt fs-6 me-2"></i>Remove from task</button></form>

                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                                {% endif %}


                                        {% endif %}
                                    </div>
                                </li>
                                {% endfor %}

                            </ul>
                        </div>




                    </div>
                </div>
            </div>
        </div>



                            {% endfor %}


                            <div class="mx-auto pb-3 w-75">

                                <a href="#" data-bs-target="#addtask" data-bs-toggle="modal"
                                   class="btn btn-dark btn-sm w-100">
                                    <i class="icofont-plus-circle me-2 fs-6"> Add To do</i>
                                </a>

                            </div>

                        </div>
                    </div>


                    <!-- In Pogress tab -->
                    <div class="col-xl-4 col-lg-12 col-md-12">
                        <div class="card mb-3">
                            <div class="card-header py-3">
                                <h6 class="mb-0 fw-bold ">In Progress</h6>
                            </div>
                            {% for task in current_user.tasks[::-1] if task.task_status == 'inprogress' %}
                                <div class="card-body">
                                    <div class="planned_task client_task">
                                        <div class="dd" data-plugin="nestable">
                                            <ol class="dd-list list-unstyled">
                                                <li class="dd-item mb-3">
                                                    <div class="dd-handle">
                                                        <div class="task-info d-flex align-items-center justify-content-between">
                                                            <h6 class="light-info-bg py-1 px-2 rounded-1 d-inline-block fw-bold small-14 mb-0">{{ task.task_type }}</h6>
                                                            <div class="task-priority d-flex flex-column align-items-center justify-content-center">
                                                                <div class="avatar-list avatar-list-stacked m-0">

                                                                    <img class="avatar rounded-circle small-avt sm"
                                                                         src="../static/images/lg/{{ task.author.avatar_location }}" alt="">
                                                                </div>
                                                                <span class="badge bg-warning text-end mt-1">inprogress</span>
                                                            </div>
                                                        </div>
                                                        <p class="py-2 mb-0">{{ task.task_description }}.</p>
                                                        <div class="tikit-info row g-3 align-items-center">
                                                            <div class="col-sm">
                                                            </div>
                                                            <div class="col-sm text-end">
                                                            <div class="small text-truncate light-danger-bg py-1 px-2 rounded-1 d-inline-block fw-bold small"> {{ task.author.first_name }} {{ task.author.last_name }} </div>
                                                        </div>
                                                            <div class="btn-group" role="group"
                                                                 aria-label="Basic outlined example">
                                                                <button type="button" class="btn btn-outline-secondary"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#edittickit{{ task.id }}">
                                                                    <i class="icofont-edit text-success"></i></button>
                                                                <form action="{{ url_for('my_boards', task_id=task.id) }}" method="post">
                                                                <button name="delete_task" type="submit"
                                                                        class="btn btn-outline-secondary deleterow"><i
                                                                        class="icofont-ui-delete text-danger"></i>
                                                                </button>
                                                                    </form>
                                                            </div>





                                                        </div>
                                                    </div>

                                                </li>


                                            </ol>
                                        </div>
                                    </div>
                                </div>






                            {% endfor %}



                        </div>
                    </div>


                    <!-- Completed Tab -->
                    <div class="col-xl-4 col-lg-12 col-md-12">
                        <div class="card mb-3">
                            <div class="card-header py-3">
                                <h6 class="mb-0 fw-bold ">Completed</h6>
                            </div>
                            {% for task in current_user.tasks[::-1] if task.task_status == 'completed' %}
                                <div class="card-body">
                                    <div class="planned_task client_task">
                                        <div class="dd" data-plugin="nestable">
                                            <ol class="dd-list list-unstyled">
                                                <li class="dd-item mb-3">
                                                    <div class="dd-handle">
                                                        <div class="task-info d-flex align-items-center justify-content-between">
                                                            <h6 class="light-info-bg py-1 px-2 rounded-1 d-inline-block fw-bold small-14 mb-0">{{ task.task_type }}</h6>
                                                            <div class="task-priority d-flex flex-column align-items-center justify-content-center">
                                                                <div class="avatar-list avatar-list-stacked m-0">

                                                                    <img class="avatar rounded-circle small-avt sm"
                                                                         src="../static/images/lg/{{ task.author.avatar_location }}" alt="">
                                                                </div>
                                                                <span class="badge bg-success text-end mt-1">completed</span>
                                                            </div>
                                                        </div>
                                                        <p class="py-2 mb-0">{{ task.task_description }}.</p>
                                                        <div class="tikit-info row g-3 align-items-center">
                                                            <div class="col-sm">
                                                            </div>
                                                            <div class="col-sm text-end">
                                                            <div class="small text-truncate light-danger-bg py-1 px-2 rounded-1 d-inline-block fw-bold small"> {{ task.author.first_name }} {{ task.author.last_name }} </div>
                                                        </div>
                                                            <div class="btn-group" role="group"
                                                                 aria-label="Basic outlined example">
                                                                <button type="button" class="btn btn-outline-secondary"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#edittickit{{ task.id }}">
                                                                    <i class="icofont-edit text-success"></i></button>
                                                                <form action="{{ url_for('my_boards', task_id=task.id) }}" method="post">
                                                                <button name="delete_task" type="submit"
                                                                        class="btn btn-outline-secondary deleterow"><i
                                                                        class="icofont-ui-delete text-danger"></i>
                                                                </button>
                                                                    </form>
                                                            </div>

                                                        </div>
                                                    </div>

                                                </li>


                                            </ol>
                                        </div>
                                    </div>
                                </div>






                            {% endfor %}



                        </div>
                    </div>


                </div>
            </div>
        </div>

        <!-- Employee Invitation-->
        <div class="modal fade" id="addUser" tabindex="-1" aria-labelledby="addUserLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title  fw-bold" id="addUserLabel">Employee Invitation</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form action="{{ url_for('my_boards', id=current_user.id) }}" method="post">
                        <div class="inviteby_email">
                            <div class="input-group mb-3">
                                <input name="_email" type="email" class="form-control" placeholder="Email-Address"/>
                                <button href="{{ url_for('my_boards') }}" name="invite_member" class="btn btn-dark" type="submit" id="button-addon2">Sent</button>
                            </div>
                        </div>
                            </form>
                        <div class="members_list">
                            <h6 class="fw-bold ">Team Requests</h6>
                            <ul class="list-unstyled list-group list-group-custom list-group-flush mb-0">

                                {% for invites in current_user.invites %}
                                <li class="list-group-item py-3 text-center text-md-start">
                                    <div class="d-flex align-items-center flex-column flex-sm-column flex-md-column flex-lg-row">
                                        <div class="no-thumbnail mb-2 mb-md-0">
                                            <img class="avatar lg rounded-circle" src="../static/images/lg/{{ invites.avatar_location }}"
                                                 alt="">
                                        </div>
                                        <div class="flex-fill ms-3 text-truncate">
                                            <h6 class="mb-0  fw-bold">{{ invites.first_name }} {{ invites.last_name }}</h6>
                                            <span class="text-muted">{{ invites.email }}</span>
                                        </div>
                                        </form>
                                                <form action="{{ url_for('my_boards', requester_id=invites.id) }}" method="post">
                                            <div class="btn-group">
                                                <button href="{{ url_for('my_boards') }}" name="accept_request" type="submit" class="btn btn-primary"
                                                         aria-expanded="false">
                                                    Accept
                                                </button>

                                            </div>
                                                </form>
                                        <div class="members-action d-flex">
                                            <form action="{{ url_for('my_boards', requester_id=invites.id) }}" method="post">
                                            <div class="btn-group mx-2">
                                                <button href="{{ url_for('my_boards') }}" name="reject_request" type="submit" class="btn btn-danger"
                                                         aria-expanded="false">
                                                    Reject
                                                </button>

                                            </div>


                                        </div>
                                    </div>
                                </li>
                                {% endfor %}

                            </ul>
                        </div>




                    <div class="members_list">
                            <h6 class="fw-bold ">Team Members </h6>
                            <ul class="list-unstyled list-group list-group-custom list-group-flush mb-0">
                                <li class="list-group-item py-3 text-center text-md-start">
                                    <div class="d-flex align-items-center flex-column flex-sm-column flex-md-column flex-lg-row">
                                        <div class="no-thumbnail mb-2 mb-md-0">
                                            <img class="avatar lg rounded-circle" src="../static/images/lg/{{ current_user.avatar_location }}"
                                                 alt="">
                                        </div>
                                        <div class="flex-fill ms-3 text-truncate">
                                            <h6 class="mb-0  fw-bold">{{ current_user.first_name }} {{ current_user.last_name }}</h6>
                                            <span class="text-muted">{{ current_user.email }}</span>
                                        </div>

                                    </div>
                                </li>
                                {% for team_member in current_user.teams %}
                                <li class="list-group-item py-3 text-center text-md-start">
                                    <div class="d-flex align-items-center flex-column flex-sm-column flex-md-column flex-lg-row">
                                        <div class="no-thumbnail mb-2 mb-md-0">
                                            <img class="avatar lg rounded-circle" src="../static/images/lg/{{ team_member.avatar_location }}"
                                                 alt="">
                                        </div>
                                        <div class="flex-fill ms-3 text-truncate">
                                            <h6 class="mb-0  fw-bold">{{ team_member.first_name }} {{ team_member.last_name }}</h6>
                                            <span class="text-muted">{{ team_member.email }}</span>
                                        </div>

                                        <div class="members-action">


                                            <div class="btn-group">
                                                <button type="button" class="btn bg-transparent dropdown-toggle"
                                                        data-bs-toggle="dropdown" aria-expanded="false">
                                                    <i class="icofont-ui-settings  fs-6"></i>
                                                </button>
                                                <ul class="dropdown-menu dropdown-menu-end">
                                                    <li><a class="dropdown-item" href="#"><i
                                                            class="icofont-delete-alt fs-6 me-2"></i>Delete Member</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                {% endfor %}

                            </ul>
                        </div>




                    </div>
                </div>
            </div>
        </div>











        <!-- Tasks List -->
        {% for task in current_user.tasks[::-1] %}
        <!-- Task Details Edit-->
        <div class="modal fade" id="edittickit{{ task.id }}" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title  fw-bold" id="createprojectlLabel"> Task
                            Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                    </div>


                    <div class="modal-body">


                        <div class="row mb-3 d-flex justify-content-between">

                            <div class="col">

                                <div class="d-flex">

                                    <div class="avatar-list avatar-list-stacked ">
                                        {% for member in current_user.teams %}
                                        <img class="avatar rounded-circle"
                                             src="../static/images/lg/{{ member.avatar_location }}" alt="">
                                        {% endfor %}
                                        <span class="avatar rounded-circle text-center pointer"
                                              data-bs-toggle="modal"
                                              data-bs-target="#addUserTask{{ task.id }}"><i
                                                class="icofont-ui-add"></i></span>
                                    </div>
                                </div>

                            </div>

                            <div class="col-md-4 mx-auto me-2">
                                <div class="row d-flex justify-content-between">
                                    <div class="col-md-4">
                                        <label for="exampleFormControlInput2778"
                                               class="form-label text-sm-center text-danger  mt-2">Due
                                            Date</label>
                                    </div>
                                    <div class="col-md-8 align-self-end">
                                        <input type="date" class="form-control "
                                               id="exampleFormControlInput2778" value="{{ task.due_date }}">
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div>
                            <h5 for="exampleFormControlInput877" class="form-label"><i
                                    class="icofont-list"></i>
                                Description</h5>
                        </div>


                        <div class="mb-3 edit" id="editable-text">

                            <p class=" display-text" id="display-text">{{ task.task_description }}</p>
                            <textarea type="text" class="form-control edit-input"
                                      id="edit-input"
                                      placeholder="Explain what the Project Name"></textarea>
                        </div>


                        <div class="mb-3">
                            <h5 for="exampleFormControlInput877" class="form-label"><i
                                    class="icofont-attachment"></i>
                                Attachments</h5>
                            <input class="form-control form-control-sm  w-50 " type="file"
                                   id="formFileMultipleoneone">
                        </div>

                        <!-- Checklist Start -->
                        <div class="body d-flex py-lg-3 py-md-2">
                            <h5 for="exampleFormControlInput877" class="form-label"><i
                                    class="icofont-checked"></i>
                                Sub Tasks</h5>
                            <div class="container-xxl">

                                <div class="row clearfix g-3">
                                    <div class="col-sm-12">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <table id="myProjectTable"
                                                       class="table table-hover align-middle mb-0"
                                                       style="width:100%">
                                                    <thead>
                                                    <tr>

                                                        <th scope="col">Task</th>
                                                        <th scope="col">Assigned</th>


                                                        <th scope="col">Actions</th>
                                                    </tr>
                                                    </thead>
                                                    {% for checklist in task.task_checklists %}
                                                    <tbody>
                                                    <tr>


                                                        <td>
                                                            {{ checklist.checklist_desc }}
                                                        </td>
                                                        <td class="align-top">
                                                            <div class="row ">

                                                                <div class="col-12">
                                                                    <img class="avatar rounded-circle small-avt sm"
                                                                         src="../static/images/lg/{{ checklist.assigned_to.avatar_location }}"
                                                                         alt="">
                                                                    <span class="fw-bold">{{ checklist.assigned_to.first_name }} {{ checklist.assigned_to.last_name }}</span>
                                                                </div>
                                                            </div>
                                                        </td>

                                                        <td class="align-top">
                                                            <div class="btn-group" role="group"
                                                                 aria-label="Basic outlined example">
                                                                <button type="button"
                                                                        class="btn btn-outline-secondary"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#editchecklist{{ checklist.id }}">
                                                                    <i
                                                                            class="icofont-edit text-success"></i>
                                                                </button>
                                                                <button type="button"
                                                                        class="btn btn-outline-secondary deleterow">
                                                                    <i
                                                                            class="icofont-ui-delete text-danger"></i>
                                                                </button>
                                                            </div>
                                                        </td>
                                                    </tr>


                                                    </tbody>









                                                        {% endfor %}

                                                </table>
                                                <div class="modal-footer">

                                                    <button type="button"
                                                            data-bs-target="#checklistadd"
                                                            data-bs-toggle="modal"
                                                            class="btn btn-primary"><i
                                                            class="icofont-plus-circle"></i>
                                                        Add Sub Task
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div><!-- Row End -->
                            </div>
                        </div>

                        <!-- Comments Starts -->
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-body card-body-height py-4">
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12">
                                            <h6 class="mb-0 fw-bold mb-3"><i
                                                    class="icofont-chat"></i> Comments ({{ task.task_comments | length }})</h6>
                                            <div class="card mb-2">
                                                <div class="card-body">
                                                    <div class="post">
                                                        <form action="{{ url_for('my_boards', task_id=task.id, id=task.author.id) }}" method="post">
                                                        <textarea name="comment_text" class="form-control" placeholder="Post"
                                                                  rows="4" required></textarea>
                                                        <div class="py-3">
                                                            <a href="#" class="px-3 "
                                                               title="upload images"><i
                                                                    class="icofont-ui-camera"></i></a>
                                                            <a href="#" class="px-3 "
                                                               title="upload video"><i
                                                                    class="icofont-video-cam"></i></a>
                                                            <a href="#" class="px-3 "
                                                               title="Send for signuture"><i
                                                                    class="icofont-pen-alt-2"></i></a>

                                                            <button name="add_comment" type="submit" href="{{ url_for('my_boards') }}" class="btn btn-primary float-sm-end  mt-2 mt-sm-0">
                                                                Comment
                                                            </button>

                                                        </div>
                                                            </form>
                                                    </div>
                                                </div>
                                            </div> <!-- .Card End -->

                                            <ul class="list-unstyled res-set">
                                                {% for comment in task.task_comments %}
                                                <li class="card mb-2">
                                                    <div class="card-body">
                                                        <div class="d-flex mb-3 pb-3 border-bottom">
                                                            <img class="avatar rounded-circle"
                                                                 src="../static/images/lg/{{ comment.comment_author.avatar_location }}"
                                                                 alt="">
                                                            <div class="flex-fill ms-3 text-truncate">
                                                                <h6 class="mb-0"><span>{{ comment.comment_author.first_name }} {{ comment.comment_author.last_name }}</span>

                                                                </h6>
                                                                <span class="text-muted">{{ format_date(comment.time_stamp) }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="timeline-item-post">

                                                            <p>{{ comment.comment_text }}</p>
                                                            <div class="mb-2 mt-4">
                                                                <a class="me-lg-4 me-2 text-primary"
                                                                   href="#"><i
                                                                        class="icofont-speech-comments"></i>
                                                                    Replies ({{ comment.replies | length }})</a>
                                                            </div>
                                                            <div>
                                                                {%  for replies in comment.replies %}
                                                                <div class="d-flex mt-3 pt-3 border-top">
                                                                    <img class="avatar rounded-circle"
                                                                         src="../static/images/lg/{{ replies.reply_author.avatar_location }}"
                                                                         alt="">
                                                                    <div class="flex-fill ms-3 text-truncate">
                                                                        <p class="mb-0"><span>{{ replies.reply_author.first_name }} {{ replies.reply_author.last_name }}</span>
                                                                            <small
                                                                                    class="msg-time">{{ format_date(replies.time_stamp) }}</small>
                                                                        </p>
                                                                        <span class="text-muted">{{ replies.reply_text }}.</span>
                                                                    </div>
                                                                </div>
                                                                    {% endfor %}

                                                            </div>
                                                        </div>
                                                        <div class="mt-4">
                                                            <form action="{{ url_for('my_boards', comment_id=comment.id) }}" method="post">
                                                            <textarea name="reply_text" class="form-control mb-3"
                                                                      placeholder="Reply"></textarea>
                                                            <button name="add_reply" type="submit" href="{{ url_for('my_boards') }}" class="btn btn-primary float-sm-end  mt-2 mt-sm-0">
                                                                Reply
                                                            </button>
                                                                </form>
                                                        </div>
                                                    </div>
                                                </li> <!-- .Card End -->
                                                    {% endfor %}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="modal-footer">
                        {% if task.task_status == 'new' %}
                            <form action="{{ url_for('my_boards', task_id=task.id) }}" method="post">
                        <button href="{{ url_for('my_boards') }}" name="move_to_inprogress" type="submit" class="btn btn-warning" data-bs-dismiss="modal">
                            Move To In progress Tab
                        </button>
                            </form>
                        {% elif task.task_status == 'inprogress' %}
                            <form action="{{ url_for('my_boards', task_id=task.id) }}" method="post">
                        <button href="{{ url_for('my_boards') }}" name="move_to_completed" type="submit" class="btn btn-success" data-bs-dismiss="modal">
                            Move To Completed Tab
                        </button>
                            </form>
                        {% else %}
                            <form action="{{ url_for('my_boards', task_id=task.id) }}" method="post">
                        <button href="{{ url_for('my_boards') }}" name="reopen_task" type="submit" class="btn btn-warning" data-bs-dismiss="modal">
                            Reopen Task
                        </button>
                            </form>
                        {% endif %}
                        <button type="button" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>





            <!-- Checklist Add -->

    <div class="modal fade" id="checklistadd" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title  fw-bold" id="leaveaddLabel"> Checklist Add</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="{{ url_for('my_boards', task_id=task.id) }}" method="post">
                    <div class="mb-3">
                        <label for="sub" class="form-label">Sub Task</label>
                        <input name="checklist_desc" type="text" class="form-control" id="sub">
                    </div>


                        <div class="deadline-form">
                                <div class="row g-3 mb-3">
                                    <div class="col">
                                        <label for="depone" class="form-label">Assign To</label>
                                        <select name="assigned_to" class="form-select">
                                        <option value="{{ current_user.id }}" selected>Self</option>
                                            {% for member in current_user.teams %}

                                            <option value="{{ member.id }}">{{ member.first_name }} {{ member.last_name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="col">
                                        <label for="deptwo" class="form-label">Due Date</label>
                                        <input name="due_date" type="date" class="form-control" id="deptwo">
                                    </div>
                                </div>

                        </div>


                        <div class="modal-footer">
                        <button name="add_checklist" href="{{ url_for('my_boards') }}" type="submit" class="btn btn-secondary" data-bs-dismiss="modal">Save</button>

                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>


    {% for checklist in task.task_checklists %}
        <!-- Checklist Edit -->
    <div class="modal fade" id="editchecklist{{ checklist.id }}" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title  fw-bold" id="edittickitLabel"> Checklist Edit</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            <form action="{{ url_for('my_boards', checklist_id=checklist.id) }}" method="post">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="sub1" class="form-label">Task</label>
                        <input name="checklist_desc" type="text" class="form-control" id="sub1" value="{{ checklist.checklist_desc }}">
                    </div>
                    <div class="deadline-form">

                            <div class="row g-3 mb-3 d-flex">
                                <div class="col">
                                    <label for="depone11" class="form-label">Assign To</label>
                                    <select name="assigned_to" class="form-select">
                                        <option value="{{ current_user.id }}" selected>Self</option>
                                        {% for member in current_user.teams %}

                                        <option {% if checklist.assigned_to.id == member.id %} selected {% endif %} value="{{ member.id }}">{{ member.first_name }} {{ member.last_name }}</option>
                                            {% endfor %}
                                    </select>
                                </div>
                                <div class="col">
                                    <label for="deptwo56" class="form-label">Due Date</label>
                                    <input name="due_date" type="date" class="form-control" id="deptwo56" value="{{ checklist.due_date }}">
                                </div>
                            </div>

                    </div>
                    <div class="mb-3">
                        <label class="form-label">Status</label>
                        <select name="status" class="form-select">
                            <option value="completed" {% if checklist.status == 'completed' %} selected {% endif %}>Completed</option>
                            <option  value="inprogress" {% if checklist.status == 'inprogress' %} selected {% endif %}>In Progress</option>


                        </select>
                    </div>
                </div>

                <div class="modal-footer">

                    <button name="save_edited_checklist" href="{{ url_for('my_boards') }}" type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
            </div>
        </div>
    </div>
        {% endfor %}

        {% endfor %}

        <!-- Add Task -->
        <div class="modal fade" id="addtask" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title  fw-bold" id="addholidayLabel"> Add Task</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form action="{{ url_for('my_boards') }}" method="post">
                        <div class="modal-body">
                            <div class="mb-3">
                                <label for="exampleFormControlInput1" class="form-label">Task Description</label>
                                <textarea name="task_description" class="form-control" id="exampleFormControlInput1"
                                          placeholder="Make a twitter clone"></textarea>
                            </div>

                            <div class="mb-3">
                                <label for="exampleFormControlInput1" class="form-label">Task Type</label>
                                <input name="task_type" type="text" class="form-control" id="exampleFormControlInput1"
                                       placeholder="Web Design">
                            </div>

                            <div class="mb-3">
                                <label for="exampleFormControlInput2778" class="form-label">Due Date</label>
                                <input name="due_date" type="date" class="form-control"
                                       id="exampleFormControlInput2778">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Done</button>
                            <button name="add_task" href="{{ url_for('my_boards') }}" type="submit" class="btn btn-primary">Add</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>





        <!-- Modal  Delete Folder/ File-->
        <div class="modal fade" id="deleteproject" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title  fw-bold" id="deleteprojectLabel"> Delete item Permanently?</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body justify-content-center flex-column d-flex">
                        <i class="icofont-ui-delete text-danger display-2 text-center mt-2"></i>
                        <p class="mt-4 fs-5 text-center">You can only delete this item Permanently</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger color-fff">Delete</button>
                    </div>
                </div>
            </div>
        </div>


    </div>









</div>

<!-- Jquery Core Js -->
<script src="../static/bundles/libscripts.bundle.js"></script>

<!-- Jquery Page Js -->
<script src="../static/js/template.js"></script>

<!--Fontawesome Js -->
<script src="https://kit.fontawesome.com/7aee5ca249.js" crossorigin="anonymous"></script>


<!-- To Do Description Edit Script -->
<script>

    const editableText = document.getElementById('editable-text');
    const displayText = document.getElementById('display-text');
    const editInput = document.getElementById('edit-input');

    editableText.addEventListener('click', function () {
        displayText.style.display = 'none';
        editInput.style.display = 'block';
        editInput.value = displayText.textContent;
        editInput.focus();
    });

    editInput.addEventListener('blur', function () {
        displayText.style.display = 'block';
        editInput.style.display = 'none';
        displayText.textContent = editInput.value;
    });


</script>

</body>

</html>